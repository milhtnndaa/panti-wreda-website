<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Berita - Panti Wreda Assalam</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981',
                        'primary-dark': '#059669',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; } 

        /* Styling untuk konten dari editor WYSIWYG */
        .prose h1, .prose h2, .prose h3 { font-weight: 700; margin-top: 1.5em; margin-bottom: 0.5em; }
        .prose p { margin-bottom: 1rem; line-height: 1.75; }
        .prose ul, .prose ol { margin-left: 1.5rem; margin-bottom: 1rem; list-style-position: outside; }
        .prose a { color: #10B981; text-decoration: underline; }
        .prose a:hover { color: #059669; }
        .prose blockquote { border-left: 4px solid #e5e7eb; padding-left: 1rem; margin-left: 0; font-style: italic; color: #6b7280; }

        /* Pola Mega Mendung dari file sebelumnya */
        .megamendung-background {
            background-image: url('10199570.jpg'); /* Pastikan file ini ada di folder yang sama */
            background-repeat: repeat;
            background-size: 250px auto;
            background-attachment: fixed;
            opacity: 0.1;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #ECFDF5; /* Anda bisa ganti ini ke bg-gray-50 jika mau */
        }

        /* Overlay untuk section-section tertentu */
        .content-section-bg {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(2px);
        }
    </style>
    </head>

<body class="bg-gray-50 relative">

    <div class="megamendung-background"></div>

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="landing-page.html" class="text-xl font-bold text-primary">Panti Wreda Assalam</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="landing-page.html#beranda" class="text-gray-600 hover:text-primary">Beranda</a>
                <a href="tentang-kami.html" class="text-gray-600 hover:text-primary">Tentang Kami</a>
                <a href="laporan-rinci.html" class="text-gray-600 hover:text-primary">Laporan Donasi</a>
                <a href="berita.html" class="text-primary font-bold">Berita</a>
                <a href="galeri.html" class="text-gray-600 hover:text-primary">Galeri</a>
                <a href="landing-page.html#kontak" class="text-gray-600 hover:text-primary">Kontak</a>
            </div>
            <a href="landing-page.html#donasi" class="hidden md:block bg-primary text-white px-5 py-2 rounded-full font-semibold hover:bg-primary-dark">Donasi Sekarang</a>
        </nav>
    </header>

    <main class="relative z-10 container mx-auto px-6 py-12">

        <article id="berita-content" class="max-w-4xl mx-auto bg-white p-6 md:p-8 rounded-lg shadow-md content-section-bg">
            <p id="loading-berita" class="text-center text-gray-500">Memuat detail berita...</p>
        </article>
    </main>

    <footer class="relative z-10 bg-gray-800 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Panti Wreda Assalam. Semua Hak Cipta Dilindungi.</p>
        </div>
    </footer>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-firestore.js";
        
        const firebaseConfig = {
          apiKey: "AIzaSyCN5vDFv2vHHwIDN6aLezQcsDSyIEvdWpM",
          authDomain: "wreda-assalam.firebaseapp.com",
          projectId: "wreda-assalam",
          storageBucket: "wreda-assalam.firebasestorage.app",
          messagingSenderId: "1051904934369",
          appId: "1:1051904934369:web:2047f406dad5d1958fd2a0",
          measurementId: "G-S2L0JK0J98"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const beritaContainer = document.getElementById('berita-content');

        async function loadDetailBerita() {
            try {
                const params = new URLSearchParams(window.location.search);
                const beritaId = params.get('id');

                if (!beritaId) {
                    throw new Error("ID Berita tidak ditemukan di URL.");
                }

                const docRef = doc(db, "berita", beritaId);
                const docSnap = await getDoc(docRef);

                if (!docSnap.exists()) {
                     throw new Error("Berita tidak dapat ditemukan di database.");
                }
                
                const data = docSnap.data();
                document.title = `${data.judul} - Panti Wreda Assalam`;

                beritaContainer.innerHTML = `
                    <div class="mb-6">
                        <a href="berita.html" class="text-primary hover:underline">&larr; Kembali ke semua berita</a>
                    </div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-2">${data.judul}</h1>
                    <p class="text-gray-500 mb-6">${data.tanggal}</p>
                    <img src="${data.gambarUrl}" onerror="this.onerror=null;this.src='https://placehold.co/1200x600/ccc/999?text=Gagal+Memuat+Gambar';" alt="${data.judul}" class="w-full h-auto max-h-96 object-cover rounded-lg mb-8">
                    <div class="prose max-w-none text-gray-700 leading-relaxed">
                        ${data.isiLengkap}
                    </div>
                `;

            } catch (error) {
                console.error("Error loading detail berita:", error);
                
                beritaContainer.innerHTML = ''; // Kosongkan kontainer
                
                const errorWrapper = document.createElement('div');
                errorWrapper.className = 'text-center';

                const title = document.createElement('p');
                title.className = 'text-red-500 font-semibold';
                title.textContent = 'Gagal memuat berita.';

                const message = document.createElement('p');
                message.className = 'text-gray-600 mt-2';
                message.textContent = error.message;

                const backLink = document.createElement('a');
                backLink.href = 'berita.html';
                backLink.className = 'text-primary hover:underline mt-4 inline-block';
                backLink.innerHTML = '&larr; Kembali ke semua berita';

                errorWrapper.appendChild(title);
                errorWrapper.appendChild(message);
                errorWrapper.appendChild(backLink);

                beritaContainer.appendChild(errorWrapper);
            }
        }
        
        loadDetailBerita();
    </script>
</body>
</html>