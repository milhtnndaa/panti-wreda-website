<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panti Wreda Assalam - Beranda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10B981', // Emerald 500
                        'primary-dark': '#059669', // Emerald 600
                        'primary-light': '#ECFDF5', // Emerald 50
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Navigasi aktif untuk header hijau */
        .nav-active { color: white; font-weight: 600; border-bottom: 2px solid white; }
        
        /* Pola Mega Mendung dari gambar yang disediakan */
        .megamendung-background {
            background-image: url('10199570.jpg'); /* Menggunakan gambar yang Anda sediakan */
            background-repeat: repeat; /* Mengulang pola */
            background-size: 250px auto; /* Sesuaikan ukuran gambar untuk pola, bisa disesuaikan lagi */
            background-attachment: fixed; /* Opsi agar latar belakang tidak ikut scroll */
            opacity: 0.1; /* Transparansi agar tidak mengganggu konten, bisa disesuaikan (0.05-0.2) */
            position: fixed; /* Menggunakan fixed agar selalu di viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Pastikan di belakang konten */
            background-color: #ECFDF5; /* Warna dasar jika gambar tidak memuat atau ada area kosong */
        }

        /* Overlay untuk section-section tertentu agar lebih mudah dibaca di atas pola */
        .content-section-bg {
            background-color: rgba(255, 255, 255, 0.9); /* Latar belakang putih semi-transparan */
            backdrop-filter: blur(2px); /* Efek blur opsional untuk background di belakangnya */
            border-radius: 0.5rem; /* Sudut membulat */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Bayangan lembut */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 relative"> 
    <div class="megamendung-background"></div>

    <header class="bg-primary sticky top-0 z-50 shadow-lg">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="landing-page.html">
                <img src="logoPanti-removebg-preview.png" alt="Logo Panti Wreda Assalam" class="h-12 w-auto">
            <div id="main-nav" class="hidden md:flex items-center space-x-8">
                <a href="#beranda" class="nav-link text-gray-200 hover:text-white transition-colors duration-300">Beranda</a>
                <a href="#tentang" class="nav-link text-gray-200 hover:text-white transition-colors duration-300">Tentang Kami</a>
                <a href="#laporan" class="nav-link text-gray-200 hover:text-white transition-colors duration-300">Laporan Donasi</a>
                <a href="#berita" class="nav-link text-gray-200 hover:text-white transition-colors duration-300">Berita</a>
                <a href="galeri.html" class="text-gray-200 hover:text-white transition-colors duration-300">Galeri</a>
                <a href="#kontak" class="nav-link text-gray-200 hover:text-white transition-colors duration-300">Kontak</a>
            </div>
            <a href="#donasi" class="hidden md:block bg-white text-primary px-5 py-2 rounded-full font-semibold hover:bg-gray-100 transition-all duration-300 transform hover:scale-105">Donasi Sekarang</a>
            <button id="mobile-menu-button" class="md:hidden text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2 bg-primary-dark">
             <a href="#beranda" class="nav-link block text-gray-200 hover:text-white py-2">Beranda</a>
             <a href="#tentang" class="nav-link block text-gray-200 hover:text-white py-2">Tentang Kami</a>
             <a href="#laporan" class="nav-link block text-gray-200 hover:text-white py-2">Laporan Donasi</a>
             <a href="#berita" class="nav-link block text-gray-200 hover:text-white py-2">Berita</a>
             <a href="galeri.html" class="block text-gray-200 hover:text-white py-2">Galeri</a>
             <a href="#kontak" class="nav-link block text-gray-200 hover:text-white py-2">Kontak</a>
             <a href="#donasi" class="block bg-white text-primary text-center mt-4 px-5 py-2 rounded-full font-semibold hover:bg-gray-100">Donasi Sekarang</a>
        </div>
    </header>

    <main class="relative z-10"> <section id="beranda" class="relative h-[60vh] md:h-[80vh] flex items-center justify-center text-center text-white">
            <div class="absolute inset-0 z-0">
                <img src="https://plus.unsplash.com/premium_photo-1726873375167-656914b96725?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                     onerror="this.onerror=null;this.src='https://placehold.co/1920x1080/000000/FFFFFF?text=Latar+Belakang';"
                     alt="Beberapa lansia tersenyum bahagia" class="w-full h-full object-cover blur-sm">
                <div class="absolute inset-0 bg-black/50"></div>
            </div>
            <div class="relative z-10 p-6">
                <h1 class="text-4xl md:text-6xl font-bold leading-tight mb-4 drop-shadow-lg">Bantu Kami Merawat dan Membahagiakan Lansia di Masa Senja Mereka</h1>
                <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8 drop-shadow-md">Setiap uluran tangan Anda memberikan kehangatan dan harapan bagi para orang tua kita di Panti Wreda Assalam.</p>
                <a href="tentang-kami.html" class="font-semibold text-lg hover:underline transition-colors duration-300">Pelajari Lebih Lanjut →</a>
            </div>
        </section>

        <section id="tentang" class="py-20">
            <div class="container mx-auto px-6">
                <div class="bg-white p-8 md:p-12 rounded-lg grid md:grid-cols-2 gap-12 items-center content-section-bg">
                    
                    <div class="w-full h-80 bg-gray-200 rounded-lg shadow-lg">
                        <img src="1714346804eZOeg.jpg" 
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/E2E8F0/94A3B8?text=Foto+Kegiatan+Panti';"
                            alt="Foto kegiatan di Panti Wreda Assalam" class="w-full h-full object-cover rounded-lg">
                    </div>
                    <div id="ringkasan-container">
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">Mengenal Panti Wreda Assalam</h2>
                        <div id="ringkasan-content" class="text-gray-600 space-y-4 leading-relaxed">
                            <p>Memuat ringkasan...</p>
                        </div>
                        <a href="tentang-kami.html" class="text-primary font-semibold hover:underline mt-6 inline-block transition-colors duration-300">Baca Selengkapnya →</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="laporan" class="py-20">
            <div class="container mx-auto px-6 text-center">
                <div class="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-xl content-section-bg">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Laporan Akuntabilitas Donasi</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto mb-10">Laporan ini diperbarui secara real-time sesuai dengan donasi yang masuk pada bulan berjalan.</p>
                    <div id="laporan-terbaru-container" class="bg-emerald-50 p-8 rounded-lg border border-emerald-200">
                        <p id="loading-laporan" class="text-gray-500">Memuat laporan bulan ini...</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="berita" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">Berita & Kegiatan Terbaru</h2>
                 <div id="berita-terbaru-container" class="grid lg:grid-cols-2 gap-8 items-start">
                     <p id="loading-berita" class="text-gray-500 col-span-full text-center content-section-bg p-8 rounded-lg shadow-xl">Memuat berita terbaru...</p>
                 </div>
                 <div class="text-center mt-12">
                    <a href="berita.html" class="bg-primary text-white px-8 py-3 rounded-full font-semibold hover:bg-primary-dark shadow-lg transform hover:-translate-y-0.5 transition-all duration-300">Lihat Semua Berita</a>
                </div>
            </div>
        </section>
        
        <section id="donasi" class="py-20">
            <div class="container mx-auto px-6 text-center">
                <div class="max-w-2xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-xl content-section-bg">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Dukungan Anda Adalah Harapan Mereka</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto mb-10">Isi data diri Anda dan pilih nominal donasi untuk memberikan kebahagiaan bagi mereka.</p>
                    
                    <form id="donation-form" class="space-y-6">
                        <div>
                            <label for="donatur-name" class="block text-left text-sm font-medium text-gray-700">Nama Lengkap</label>
                            <input type="text" id="donatur-name" placeholder="Masukkan nama Anda" class="mt-1 w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary" required>
                        </div>
                        <div>
                            <label for="donatur-email" class="block text-left text-sm font-medium text-gray-700">Alamat Email</label>
                            <input type="email" id="donatur-email" placeholder="Untuk konfirmasi pembayaran" class="mt-1 w-full p-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary" required>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <button type="button" class="donation-amount-btn border border-gray-300 p-4 rounded-lg hover:border-primary hover:bg-emerald-50 transition-colors" data-amount="50000">Rp 50.000</button>
                            <button type="button" class="donation-amount-btn border border-gray-300 p-4 rounded-lg hover:border-primary hover:bg-emerald-50 transition-colors" data-amount="100000">Rp 100.000</button>
                            <button type="button" class="donation-amount-btn border border-gray-300 p-4 rounded-lg hover:border-primary hover:bg-emerald-50 transition-colors" data-amount="250000">Rp 250.000</button>
                            <button type="button" class="donation-amount-btn border border-gray-300 p-4 rounded-lg hover:border-primary hover:bg-emerald-50 transition-colors" data-amount="500000">Rp 500.000</button>
                        </div>
                        <div>
                            <label for="custom-amount" class="sr-only">Masukkan Nominal Lain</label>
                            <input type="text" id="custom-amount" placeholder="Atau Masukkan Nominal Lain" class="w-full p-4 border border-gray-300 rounded-lg text-center text-lg focus:ring-primary focus:border-primary">
                        </div>
                        <button id="pay-button" type="submit" class="w-full bg-primary text-white text-xl font-bold py-4 rounded-lg hover:bg-primary-dark disabled:bg-gray-400 shadow-lg transform hover:-translate-y-0.5 transition-all">Lanjut ke Pembayaran</button>
                        <p class="text-gray-500 text-sm mt-4">Pembayaran aman melalui Xendit.</p>
                    </form>
                </div>
            </div>
        </section>

        <section id="kontak" class="py-20">
             <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Hubungi Kami</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Kami senang mendengar dari Anda, jangan ragu untuk bertanya atau merencanakan kunjungan.</p>
                </div>
                <div class="max-w-6xl mx-auto bg-white p-8 md:p-12 rounded-lg shadow-xl grid md:grid-cols-2 gap-8 content-section-bg">
                    <div>
                        <div class="flex items-start mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary mr-4 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            <div>
                                <h3 class="text-xl font-bold">Alamat Panti</h3>
                                <p class="text-gray-600 mt-1">Jl. Harapan Mulya Gg. Bakti 7, Drajat, Kec. Kesambi, Kota Cirebon, Jawa Barat 45133</p>
                            </div>
                        </div>
                        <div class="flex items-start mb-6">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary mr-4 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                            <div>
                                <h3 class="text-xl font-bold">Telepon & WhatsApp</h3>
                                <p class="text-gray-600 mt-1">085317779780</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary mr-4 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                            <div>
                                <h3 class="text-xl font-bold">Email</h3>
                                <p class="text-gray-600 mt-1">pantiwredaassalam@gmail.com</p>
                            </div>
                        </div>
                    </div>
                    <div class="w-full h-96 rounded-lg shadow-inner overflow-hidden">
                        <iframe 
                           src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d8378.623709175215!2d108.55785!3d-6.732618000000001!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e6f1d88acbd849f%3A0x856d529ebe6e0205!2sPanti%20Wreda%sAssalam!5e1!3m2!1sid!2sus!4v1759745555480!5m2!1sid!2sus"
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="bg-primary-dark text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p class="text-gray-200">© 2025 Panti Wreda Assalam. Semua Hak Cipta Dilindungi.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
        import { getFirestore, collection, getDocs, getDoc, doc, query, where, orderBy, limit } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-firestore.js";
        
        const firebaseConfig = {
  apiKey: "AIzaSyCN5vDFv2vHHwIDN6aLezQcsDSyIEvdWpM",
  authDomain: "wreda-assalam.firebaseapp.com",
  projectId: "wreda-assalam",
  storageBucket: "wreda-assalam.firebasestorage.app",
  messagingSenderId: "1051904934369",
  appId: "1:1051904934369:web:2047f406dad5d1958fd2a0",
  measurementId: "G-S2L0JK0J98"
};


        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- FUNGSI UTILITAS ---
        const formatRupiah = (angka, prefix = '') => {
            if(isNaN(angka)) return prefix + '0';
            let number_string = String(angka).replace(/[^,\d]/g, '');
            let sisa = number_string.length % 3;
            let rupiah = number_string.substr(0, sisa);
            let ribuan = number_string.substr(sisa).match(/\d{3}/gi);
            if (ribuan) {
                let separator = sisa ? '.' : '';
                rupiah += separator + ribuan.join('.');
            }
            return prefix + rupiah;
        };

        const showError = (container, message) => {
            container.innerHTML = '';
            const p = document.createElement('p');
            p.className = 'text-red-500';
            p.textContent = message;
            container.appendChild(p);
        };

        // --- FUNGSI FETCH DATA ---
        
        async function fetchRingkasanTentangKami() {
            const container = document.getElementById('ringkasan-content');
            try {
                const docRef = doc(db, "profilPanti", "kontenUtama");
                const docSnap = await getDoc(docRef);

                container.innerHTML = ''; 
                if (docSnap.exists() && docSnap.data().ringkasan) {
                    const ringkasanText = docSnap.data().ringkasan;
                    container.innerHTML = ringkasanText;
                } else {
                    const p = document.createElement('p');
                    p.textContent = 'Konten ringkasan belum diatur oleh admin.';
                    container.appendChild(p);
                }
            } catch (error) {
                console.error("Gagal memuat ringkasan:", error);
                showError(container, 'Gagal memuat ringkasan.');
            }
        }
        
        async function fetchLaporanTerbaru() {
            const container = document.getElementById('laporan-terbaru-container');
            try {
                const now = new Date();
                const bulanTahunIni = now.toLocaleString('id-ID', { month: 'long', year: 'numeric' });
                const laporanQuery = query(collection(db, "laporanBulanan"), where("bulanTahun", "==", bulanTahunIni), limit(1));
                const laporanSnapshot = await getDocs(laporanQuery);
                container.innerHTML = ''; 

                const h3 = document.createElement('h3');
                h3.className = 'text-2xl font-bold text-primary mb-4';
                h3.textContent = 'Laporan Donasi ' + bulanTahunIni;
                container.appendChild(h3);

                if (laporanSnapshot.empty) {
                    const p = document.createElement('p');
                    p.className = 'text-gray-500';
                    p.textContent = 'Laporan untuk bulan ini belum dibuat.';
                    container.appendChild(p);
                } else {
                    const laporanDoc = laporanSnapshot.docs[0];
                    const laporanData = laporanDoc.data();
                    const transaksiQuery = query(collection(db, "transaksi"), where("laporanId", "==", laporanDoc.id), where("tipe", "==", "pemasukan"));
                    const transaksiSnapshot = await getDocs(transaksiQuery);
                    
                    let totalPemasukan = 0;
                    transaksiSnapshot.forEach(doc => { totalPemasukan += doc.data().jumlah; });
                    
                    const divSpace = document.createElement('div');
                    divSpace.className = 'space-y-4 text-left';
                    
                    const divTerkumpul = document.createElement('div');
                    divTerkumpul.className = 'flex justify-between items-center';
                    const spanTerkumpulLabel = document.createElement('span');
                    spanTerkumpulLabel.textContent = 'Total Donasi Terkumpul';
                    const spanTerkumpulValue = document.createElement('span');
                    spanTerkumpulValue.className = 'font-bold text-lg text-primary-dark';
                    spanTerkumpulValue.textContent = formatRupiah(totalPemasukan, 'Rp ');
                    divTerkumpul.appendChild(spanTerkumpulLabel);
                    divTerkumpul.appendChild(spanTerkumpulValue);
                    
                    const divTarget = document.createElement('div');
                    divTarget.className = 'flex justify-between items-center';
                    const spanTargetLabel = document.createElement('span');
                    spanTargetLabel.textContent = 'Target Dana Kebutuhan';
                    const spanTargetValue = document.createElement('span');
                    spanTargetValue.className = 'font-bold text-lg text-gray-700';
                    spanTargetValue.textContent = formatRupiah(laporanData.target, 'Rp ');
                    divTarget.appendChild(spanTargetLabel);
                    divTarget.appendChild(spanTargetValue);
                    
                    divSpace.appendChild(divTerkumpul);
                    divSpace.appendChild(divTarget);
                    container.appendChild(divSpace);
                }
                
                const a = document.createElement('a');
                a.href = 'laporan-rinci.html';
                a.className = 'text-primary font-semibold hover:underline mt-6 inline-block';
                a.textContent = 'Lihat Semua Laporan →';
                container.appendChild(a);
            } catch (error) {
                console.error("Error fetching laporan:", error);
                showError(container, 'Gagal memuat laporan.');
            }
        }
        
        async function fetchBeritaTerbaru() {
            const container = document.getElementById('berita-terbaru-container');
            try {
                const q = query(collection(db, "berita"), orderBy("createdAt", "desc"), limit(4));
                const snapshot = await getDocs(q);
                
                container.innerHTML = '';
                if (snapshot.empty) {
                    const p = document.createElement('p');
                    p.className = 'text-gray-500 col-span-full text-center content-section-bg p-8 rounded-lg shadow-xl';
                    p.textContent = 'Belum ada berita.';
                    container.appendChild(p);
                    return;
                }
                
                const beritaUtama = snapshot.docs[0];
                const beritaUtamaData = beritaUtama.data();
                const beritaUtamaId = beritaUtama.id;
                const ringkasanUtama = beritaUtamaData.isiLengkap.replace(/<[^>]+>/g, '').substring(0, 100) + '...';
                
                const beritaUtamaEl = document.createElement('div');
                beritaUtamaEl.className = "lg:col-span-1 bg-white rounded-lg shadow-xl h-full flex flex-col";
                
                const imgUtama = document.createElement('img');
                imgUtama.src = beritaUtamaData.gambarUrl;
                imgUtama.alt = beritaUtamaData.judul;
                imgUtama.className = "w-full h-80 object-cover rounded-t-lg";
                imgUtama.onerror = () => { imgUtama.src = 'https://placehold.co/600x400/ccc/999?text=Gagal+Muat'; };
                
                const contentUtamaWrapper = document.createElement('div');
                contentUtamaWrapper.className = "p-6 flex flex-col flex-grow";
                
                const pTanggal = document.createElement('p');
                pTanggal.className = "text-sm text-gray-500 mb-2";
                pTanggal.textContent = beritaUtamaData.tanggal;
                
                const h3Judul = document.createElement('h3');
                h3Judul.className = "font-bold text-2xl mb-4 flex-grow";
                h3Judul.textContent = beritaUtamaData.judul;
                
                const pRingkasan = document.createElement('p');
                pRingkasan.className = "text-gray-600";
                pRingkasan.textContent = ringkasanUtama;
                
                const aLink = document.createElement('a');
                aLink.href = 'detail-berita.html?id=' + beritaUtamaId;
                aLink.className = "text-primary font-semibold hover:underline mt-auto";
                aLink.innerHTML = "Baca selengkapnya →";

                contentUtamaWrapper.appendChild(pTanggal);
                contentUtamaWrapper.appendChild(h3Judul);
                contentUtamaWrapper.appendChild(pRingkasan);
                contentUtamaWrapper.appendChild(aLink);
                beritaUtamaEl.appendChild(imgUtama);
                beritaUtamaEl.appendChild(contentUtamaWrapper);
                container.appendChild(beritaUtamaEl);

                if (snapshot.docs.length > 1) {
                    const otherNewsContainer = document.createElement('div');
                    otherNewsContainer.className = "lg:col-span-1 space-y-8";
                    
                    snapshot.docs.slice(1).forEach(doc => {
                       const data = doc.data();
                       const card = document.createElement('div');
                       card.className = 'bg-white rounded-lg shadow-xl flex items-center';
                       
                       const imgKecil = document.createElement('img');
                       imgKecil.src = data.gambarUrl;
                       imgKecil.alt = data.judul;
                       imgKecil.className = "w-1/3 h-32 object-cover rounded-l-lg";
                       imgKecil.onerror = () => { imgKecil.src = 'https://placehold.co/400x300/ccc/999?text=Gagal+Muat'; };
                       
                       const contentKecilWrapper = document.createElement('div');
                       contentKecilWrapper.className = "p-4 flex-1";
                       
                       const pTglKecil = document.createElement('p');
                       pTglKecil.className = "text-xs text-gray-500 mb-1";
                       pTglKecil.textContent = data.tanggal;
                       
                       const h3JudulKecil = document.createElement('h3');
                       h3JudulKecil.className = "font-bold text-md mb-2";
                       h3JudulKecil.textContent = data.judul;
                       
                       const aLinkKecil = document.createElement('a');
                       aLinkKecil.href = 'detail-berita.html?id=' + doc.id;
                       aLinkKecil.className = "text-sm text-primary font-semibold hover:underline";
                       aLinkKecil.textContent = "Baca →";

                       contentKecilWrapper.appendChild(pTglKecil);
                       contentKecilWrapper.appendChild(h3JudulKecil);
                       contentKecilWrapper.appendChild(aLinkKecil);
                       card.appendChild(imgKecil);
                       card.appendChild(contentKecilWrapper);
                       otherNewsContainer.appendChild(card);
                    });
                    container.appendChild(otherNewsContainer);
                }
            } catch (error) {
                console.error("Error fetching berita:", error);
                showError(container, 'Gagal memuat berita.');
            }
        }

        // --- INISIALISASI ---
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

            const donationForm = document.getElementById('donation-form');
            const amountButtons = document.querySelectorAll('.donation-amount-btn');
            const customAmountInput = document.getElementById('custom-amount');
            const payButton = document.getElementById('pay-button');
            let selectedAmount = 0;
            
            amountButtons.forEach(button => {
                button.addEventListener('click', () => {
                    amountButtons.forEach(btn => btn.classList.remove('bg-primary', 'text-white', 'border-primary'));
                    button.classList.add('bg-primary', 'text-white', 'border-primary');
                    selectedAmount = parseInt(button.dataset.amount);
                    customAmountInput.value = formatRupiah(selectedAmount, 'Rp ');
                });
            });
            customAmountInput.addEventListener('focus', () => {
                amountButtons.forEach(btn => btn.classList.remove('bg-primary', 'text-white', 'border-primary'));
                selectedAmount = 0;
            });
            customAmountInput.addEventListener('input', (e) => {
                let value = e.target.value.replace(/[^0-9]/g, '');
                selectedAmount = parseInt(value) || 0;
                e.target.value = formatRupiah(value, 'Rp ');
            });
            donationForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (selectedAmount < 10000) {
                    alert('Donasi minimal adalah Rp 10.000.'); return;
                }
                payButton.disabled = true;
                payButton.textContent = 'Memproses...';
                try {
                    const response = await fetch('https://panti-backend-api.onrender.com/create-invoice', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            amount: selectedAmount,
                            name: document.getElementById('donatur-name').value,
                            email: document.getElementById('donatur-email').value,
                        }),
                    });
                    if(!response.ok) throw new Error('Gagal menghubungi server.');
                    const data = await response.json();
                    if (data.invoice_url) {
                        window.location.href = data.invoice_url;
                    } else {
                        throw new Error('URL invoice tidak diterima.');
                    }
                } catch (error) {
                    alert('Terjadi kesalahan: ' + error.message);
                    payButton.disabled = false;
                    payButton.textContent = 'Lanjut ke Pembayaran';
                }
            });
            
            fetchLaporanTerbaru();
            fetchBeritaTerbaru();
            fetchRingkasanTentangKami(); 
        });
    </script>
</body>
</html>